<!DOCTYPE html [
    <!ENTITY nbsp "&#160;"> 
    <!ENTITY copy "&#169;"> 
    ]>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <meta charset="utf-8"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
    </h:head>
    <body>
          <ui:composition template="./masterpage.xhtml">
            <ui:define name="content">
                <h:form id ="frmpnl">
                <div class="cart-box-main">
        <div class="container">
            <div class="row">
                
                <div class="col-lg-12">
                    <p:scrollPanel id="tnspane" mode="native" style="width:100%;height:250px; border: 0px;float: left; margin-left:0%;">                       
                    <hr/>       
                           <div class="table-main table-responsive">                 
                               <p:dataTable emptyMessage="No item available" binding="#{table2}" id="requests2" var="myrequest" value="#{cartController.listCartItems()}" class="table table-striped" >                     
                                 <p:column headerText="S/No" width="100">
                                    #{table2.rowIndex + 1}
                                </p:column>
                                   
                                   <p:column headerText="Name" width="100">
                                       <p:outputLabel value="#{itemController.fetchItemName(myrequest.itemId)}" /><br/>
                                 </p:column>  
                                   
                                 <p:column headerText="Price" width="100">
                                     <p:outputLabel value="#{myrequest.unitPrice}" /><br/>
                                 </p:column>  
                                   
                                 <p:column headerText="Quantity" width="100">
                                     <p:outputLabel value="#{myrequest.quantity}" /><br/>
                                 </p:column>  
                                   
                                 <p:column headerText="Total" width="100">
                                     <p:outputLabel value="#{myrequest.totalAmount}" /><br/>
                                 </p:column> 

                                   <p:column headerText="Remove" width="100">
                                       <p:commandButton id="rmv" value="delete" class="btn btn-success" style="background: linear-gradient(90deg, #42b0f5, #5442f5); color:#ffffff; padding:0%; margin-top:-15%;" actionListener="#{cartController.removeItem(myrequest)}" update="@form" />
                                 </p:column> 

                             </p:dataTable>   
                               
                               
                               
                            </div>
                           
                           
                       </p:scrollPanel>

                </div>
            </div>

            
            <div class="row my-12">
                
                <div class="col-sm-6 col-lg-6 mb-3">
                    <div class="checkout-address">
                        <div class="title-left">
                            <h3>Billing address</h3>
                        </div>

                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="fname">First name *</label>
                                    <h:inputText id="fname" class='form-control' value="#{webController.cst.firstName}" pt:placeholder='Enter firstname' style="padding-bottom:0%; margin-bottom:2%;" />
                                    <div class="invalid-feedback"> Valid first name is required. </div>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="sname">Last name *</label>
                                    <h:inputText id="sname" class='form-control' value="#{webController.cst.lastName}" pt:placeholder='Enter lastname' style="padding-bottom:0%; margin-bottom:2%;" />
                                    <div class="invalid-feedback"> Valid last name is required. </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="emailaddr">Email Address *</label>
                                <h:inputText id="emailaddr" class='form-control' value="#{webController.cst.emailAddress}" pt:placeholder='Enter email address' style="padding-bottom:0%; margin-bottom:2%;" />
                                <div class="invalid-feedback"> Please enter a valid email address. </div>
                            </div>
                            <div class="mb-3">
                                <label for="addr">Address *</label>
                                <h:inputText id="addr" class='form-control' value="#{webController.cst.address}" pt:placeholder='Enter address' style="padding-bottom:0%; margin-bottom:2%;" />
                                <div class="invalid-feedback"> Please enter your address. </div>
                            </div>
                            <hr />
                             
                    </div>
                </div>
                
                <div class="col-lg-4 col-sm-4">
                    <div class="order-box">
                        <h3>Order summary</h3>
                        <div class="d-flex">
                            <h4>Sub Total</h4>
                            <div class="ml-auto font-weight-bold"> &#163;#{cartController.subTotal()} </div>
                        </div>
                        <hr/>
                        <div class="d-flex gr-total">
                            <h5>Grand Total</h5>
                            <div class="ml-auto h5"> &#163;#{cartController.grandTotal()} </div>
                        </div>
                        <hr/> </div>
                </div>
                <div class="col-12 d-flex shopping-box">
                    <p:commandButton id="subitm" value="Checkout" class="ml-auto btn hvr-hover" style="background: linear-gradient(90deg, #42b0f5, #5442f5); color:#ffffff; padding:0%;" actionListener="#{webController.regCustomer()}" update="@form" />
                     </div>
            <p:messages id="msg" />
            </div>

        </div>
    </div>
                </h:form>
                
            </ui:define>
       </ui:composition>   
    </body>
</html>

